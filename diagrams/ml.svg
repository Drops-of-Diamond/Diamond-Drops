<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: ml Pages: 1 -->
<svg width="2461pt" height="650pt"
 viewBox="0.00 0.00 2460.50 650.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 646)">
<title>ml</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-646 2456.5,-646 2456.5,4 -4,4"/>
<!-- ndProposer -->
<g id="node1" class="node">
<title>ndProposer</title>
<polygon fill="none" stroke="#000000" points="0,-452.5 0,-641.5 257,-641.5 257,-452.5 0,-452.5"/>
<text text-anchor="middle" x="128.5" y="-626.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="128.5" y="-611.3" font-family="Times,serif" font-size="14.00" fill="#000000">Proposer</text>
<polyline fill="none" stroke="#000000" points="0,-603.5 257,-603.5 "/>
<text text-anchor="middle" x="128.5" y="-588.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; id: ProposerIdHash</text>
<polyline fill="none" stroke="#000000" points="0,-580.5 257,-580.5 "/>
<text text-anchor="middle" x="128.5" y="-565.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new() &#45;&gt; Proposer</text>
<text text-anchor="middle" x="128.5" y="-550.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ run(&amp;self)</text>
<text text-anchor="middle" x="128.5" y="-535.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; register(&amp;self)</text>
<text text-anchor="middle" x="128.5" y="-520.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; add_balance(&amp;self)</text>
<text text-anchor="middle" x="128.5" y="-505.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; collect_blobs(&amp;self)</text>
<text text-anchor="middle" x="128.5" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; prepare_collation(&amp;self)</text>
<text text-anchor="middle" x="128.5" y="-475.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; reveal_proposal(&amp;self)</text>
<text text-anchor="middle" x="128.5" y="-460.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; broadcast_collation_body(&amp;self)</text>
</g>
<!-- ndSMCListener -->
<g id="node2" class="node">
<title>ndSMCListener</title>
<polygon fill="none" stroke="#000000" points="275,-475 275,-619 866,-619 866,-475 275,-475"/>
<text text-anchor="middle" x="570.5" y="-603.8" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="570.5" y="-588.8" font-family="Times,serif" font-size="14.00" fill="#000000">SMCListener</text>
<polyline fill="none" stroke="#000000" points="275,-581 866,-581 "/>
<text text-anchor="middle" x="570.5" y="-565.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; period: ShardIdHash</text>
<text text-anchor="middle" x="570.5" y="-550.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; notary_sender: mpsc::Sender&lt;message::Message&gt;</text>
<polyline fill="none" stroke="#000000" points="275,-543 866,-543 "/>
<text text-anchor="middle" x="570.5" y="-527.8" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(notary_sender: mpsc::Sender&lt;message::Message&gt;) &#45;&gt; SMCListener</text>
<text text-anchor="middle" x="570.5" y="-512.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; register_notary_address(&amp;self, notary_addr: NotaryAddress) &#45;&gt; bool</text>
<text text-anchor="middle" x="570.5" y="-497.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; get_selected_notaries(&amp;self, shard_id: ShardIdHash) &#45;&gt; Vec&lt;NotaryAddress&gt;</text>
<text text-anchor="middle" x="570.5" y="-482.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; register_proposer_address(&amp;self, proposer_addr: ProposerAddress) &#45;&gt; bool</text>
</g>
<!-- ndCollation -->
<g id="node3" class="node">
<title>ndCollation</title>
<polygon fill="none" stroke="#000000" points="1151.5,-301.5 1151.5,-400.5 1615.5,-400.5 1615.5,-301.5 1151.5,-301.5"/>
<text text-anchor="middle" x="1383.5" y="-385.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1383.5" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#000000">Collation</text>
<polyline fill="none" stroke="#000000" points="1151.5,-362.5 1615.5,-362.5 "/>
<text text-anchor="middle" x="1383.5" y="-347.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; header: header::Header</text>
<text text-anchor="middle" x="1383.5" y="-332.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; body: body::Body</text>
<polyline fill="none" stroke="#000000" points="1151.5,-324.5 1615.5,-324.5 "/>
<text text-anchor="middle" x="1383.5" y="-309.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(header: header::Header, body: body::Body) &#45;&gt; Collation</text>
</g>
<!-- ndNotary -->
<g id="node8" class="node">
<title>ndNotary</title>
<polygon fill="none" stroke="#000000" points="897.5,-.5 897.5,-249.5 1869.5,-249.5 1869.5,-.5 897.5,-.5"/>
<text text-anchor="middle" x="1383.5" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1383.5" y="-219.3" font-family="Times,serif" font-size="14.00" fill="#000000">Notary</text>
<polyline fill="none" stroke="#000000" points="897.5,-211.5 1869.5,-211.5 "/>
<text text-anchor="middle" x="1383.5" y="-196.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; id: NotaryIdHash</text>
<text text-anchor="middle" x="1383.5" y="-181.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; selected: bool</text>
<text text-anchor="middle" x="1383.5" y="-166.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; shard_id: ShardIdHash</text>
<text text-anchor="middle" x="1383.5" y="-151.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; collation_vectors: HashMap&lt;ShardIdHash, Vec&lt;collation::Collation&gt;&gt;</text>
<text text-anchor="middle" x="1383.5" y="-136.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; proposal_vectors: HashMap&lt;ShardIdHash, Vec&lt;collation::Collation&gt;&gt;</text>
<text text-anchor="middle" x="1383.5" y="-121.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; smc_listener: mpsc::Receiver&lt;message::Message&gt;</text>
<text text-anchor="middle" x="1383.5" y="-106.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; manager_listener: mpsc::Receiver&lt;client_thread::Command&gt;</text>
<polyline fill="none" stroke="#000000" points="897.5,-98.5 1869.5,-98.5 "/>
<text text-anchor="middle" x="1383.5" y="-83.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(smc_listener: mpsc::Receiver&lt;message::Message&gt;, manager_listener: mpsc::Receiver&lt;client_thread::Command&gt;) &#45;&gt; Notary</text>
<text text-anchor="middle" x="1383.5" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ run(&amp;mut self)</text>
<text text-anchor="middle" x="1383.5" y="-53.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; store_collation(&amp;mut self, collation: collation::Collation)</text>
<text text-anchor="middle" x="1383.5" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; store_proposal(&amp;mut self, proposal: collation::Collation)</text>
<text text-anchor="middle" x="1383.5" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; get_availability(&amp;mut self)</text>
<text text-anchor="middle" x="1383.5" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; submit_vote(&amp;self)</text>
</g>
<!-- ndCollation&#45;&gt;ndNotary -->
<g id="edge1" class="edge">
<title>ndCollation&#45;&gt;ndNotary</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1383.5,-301.4033C1383.5,-288.8402 1383.5,-274.7312 1383.5,-260.1082"/>
<polygon fill="#000000" stroke="#000000" points="1383.5,-249.9151 1388.0001,-259.915 1383.5,-254.9151 1383.5001,-259.9151 1383.5001,-259.9151 1383.5001,-259.9151 1383.5,-254.9151 1379.0001,-259.9151 1383.5,-249.9151 1383.5,-249.9151"/>
</g>
<!-- ndHeader -->
<g id="node4" class="node">
<title>ndHeader</title>
<polygon fill="none" stroke="#000000" points="884.5,-475 884.5,-619 1882.5,-619 1882.5,-475 884.5,-475"/>
<text text-anchor="middle" x="1383.5" y="-603.8" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1383.5" y="-588.8" font-family="Times,serif" font-size="14.00" fill="#000000">Header</text>
<polyline fill="none" stroke="#000000" points="884.5,-581 1882.5,-581 "/>
<text text-anchor="middle" x="1383.5" y="-565.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; shard_id: ShardIdHash</text>
<text text-anchor="middle" x="1383.5" y="-550.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; proposer_address: ProposerAddress</text>
<text text-anchor="middle" x="1383.5" y="-535.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; chunk_root: ChunkRootHash</text>
<text text-anchor="middle" x="1383.5" y="-520.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; period: ChunkPeriodHash</text>
<polyline fill="none" stroke="#000000" points="884.5,-513 1882.5,-513 "/>
<text text-anchor="middle" x="1383.5" y="-497.8" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(shard_id: ShardIdHash, chunk_root: ChunkRootHash, period: ChunkPeriodHash, proposer_address: ProposerAddress) &#45;&gt; Header</text>
<text text-anchor="middle" x="1383.5" y="-482.8" font-family="Times,serif" font-size="14.00" fill="#000000">+ hash(&amp;self) &#45;&gt; CollationHeaderHash</text>
</g>
<!-- ndHeader&#45;&gt;ndCollation -->
<g id="edge2" class="edge">
<title>ndHeader&#45;&gt;ndCollation</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1383.5,-474.8518C1383.5,-453.7488 1383.5,-430.9233 1383.5,-410.6852"/>
<polygon fill="#000000" stroke="#000000" points="1383.5,-400.6699 1388.0001,-410.6698 1383.5,-405.6699 1383.5001,-410.6699 1383.5001,-410.6699 1383.5001,-410.6699 1383.5,-405.6699 1379.0001,-410.6699 1383.5,-400.6699 1383.5,-400.6699"/>
</g>
<!-- ndMessage -->
<g id="node5" class="node">
<title>ndMessage</title>
<polygon fill="none" stroke="#000000" points="1900.5,-494 1900.5,-600 2082.5,-600 2082.5,-494 1900.5,-494"/>
<text text-anchor="middle" x="1991.5" y="-584.8" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Enumeration&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1991.5" y="-569.8" font-family="Times,serif" font-size="14.00" fill="#000000">Message</text>
<polyline fill="none" stroke="#000000" points="1900.5,-562 2082.5,-562 "/>
<text text-anchor="middle" x="1991.5" y="-546.8" font-family="Times,serif" font-size="14.00" fill="#000000">Selected</text>
<text text-anchor="middle" x="1991.5" y="-531.8" font-family="Times,serif" font-size="14.00" fill="#000000">ShardId</text>
<text text-anchor="middle" x="1991.5" y="-516.8" font-family="Times,serif" font-size="14.00" fill="#000000">Collation</text>
<text text-anchor="middle" x="1991.5" y="-501.8" font-family="Times,serif" font-size="14.00" fill="#000000">Proposal</text>
</g>
<!-- ndCommand -->
<g id="node6" class="node">
<title>ndCommand</title>
<polygon fill="none" stroke="#000000" points="2100.5,-516.5 2100.5,-577.5 2282.5,-577.5 2282.5,-516.5 2100.5,-516.5"/>
<text text-anchor="middle" x="2191.5" y="-562.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Enumeration&gt;&gt;&gt;</text>
<text text-anchor="middle" x="2191.5" y="-547.3" font-family="Times,serif" font-size="14.00" fill="#000000">Command</text>
<polyline fill="none" stroke="#000000" points="2100.5,-539.5 2282.5,-539.5 "/>
<text text-anchor="middle" x="2191.5" y="-524.3" font-family="Times,serif" font-size="14.00" fill="#000000">Terminate</text>
</g>
<!-- ndClientThread -->
<g id="node7" class="node">
<title>ndClientThread</title>
<polygon fill="none" stroke="#000000" points="1930.5,-286.5 1930.5,-415.5 2452.5,-415.5 2452.5,-286.5 1930.5,-286.5"/>
<text text-anchor="middle" x="2191.5" y="-400.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="2191.5" y="-385.3" font-family="Times,serif" font-size="14.00" fill="#000000">ClientThread</text>
<polyline fill="none" stroke="#000000" points="1930.5,-377.5 2452.5,-377.5 "/>
<text text-anchor="middle" x="2191.5" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; mode: config::Mode</text>
<text text-anchor="middle" x="2191.5" y="-347.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ manager: Option&lt;mpsc::Sender&lt;Command&gt;&gt;</text>
<text text-anchor="middle" x="2191.5" y="-332.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ handle: Option&lt;thread::JoinHandle&lt;()&gt;&gt;</text>
<polyline fill="none" stroke="#000000" points="1930.5,-324.5 2452.5,-324.5 "/>
<text text-anchor="middle" x="2191.5" y="-309.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(mode: &amp;config::Mode) &#45;&gt; ClientThread</text>
<text text-anchor="middle" x="2191.5" y="-294.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ run(&amp;mut self, smc_receiver: mpsc::Receiver&lt;message::Message&gt;)</text>
</g>
<!-- ndCommand&#45;&gt;ndClientThread -->
<g id="edge3" class="edge">
<title>ndCommand&#45;&gt;ndClientThread</title>
<path fill="none" stroke="#000000" d="M2191.5,-516.375C2191.5,-492.7078 2191.5,-458.8795 2191.5,-427.9776"/>
<polygon fill="#000000" stroke="#000000" points="2191.5001,-427.8569 2187.5,-421.8569 2191.5,-415.8569 2195.5,-421.8569 2191.5001,-427.8569"/>
</g>
</g>
</svg>
